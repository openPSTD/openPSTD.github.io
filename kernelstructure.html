<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>openPSTD: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">openPSTD
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">Open source simulation for sound propagation in urban environments</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="kernelstructure.html"><span>Kernel&#160;Structure</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="contents">
<div class="textblock"><h1>Structure of the kernel</h1>
<p>This page describes the interaction between the classes that are responsible for the scientific computations in openPSTD.</p>
<h2>Component list</h2>
<p>A list with all the module in the kernel is present <a class="el" href="namespaceOpenPSTD_1_1Kernel.html">here</a>.</p>
<h2>Composition structure</h2>
<p>The kernel is roughly divided in two subsets:</p>
<ol type="1">
<li>The core components that represent the simulation environment (<a class="el" href="classOpenPSTD_1_1Kernel_1_1Domain.html">Domain</a>, <a class="el" href="classOpenPSTD_1_1Kernel_1_1Point.html">Point</a>, <a class="el" href="classOpenPSTD_1_1Kernel_1_1Scene.html">Scene</a>, <a class="el" href="classOpenPSTD_1_1Kernel_1_1Receiver.html">Receiver</a>, etc)</li>
<li>The interface components that facilitate the communication of data to the application (<a class="el" href="classOpenPSTD_1_1Kernel_1_1PSTDKernel.html">PSTDKernel</a>, <a class="el" href="classOpenPSTD_1_1Kernel_1_1KernelInterface.html">KernelInterface</a>, <a class="el" href="classOpenPSTD_1_1Kernel_1_1KernelCallback.html">KernelCallback</a>, etc)</li>
</ol>
<p>Almost all components of any subset are agnostic to the components of the other. The exception is the PSTDKernel and the scene, which have a aggregation relationship. If tools permit, a UML diagram will be posted in this section.</p>
<h2>Initialization steps</h2>
<p>When running a simulation, the application (possessing a <a class="el" href="classOpenPSTD_1_1Kernel_1_1PSTDConfiguration.html">configuration</a> object) creates an instance of PSTDKernel. Upon creating this instance, the scene is created, all domains are converted to their kernel representations and the PML domains are constructed. </p><h3>Detailed initialization</h3>
<p>First the domains, speakers and receivers from the PSTDFile are converted to their kernel representation. After that, the domains are connected and integrated into the scene, and the PML domains are created wherever necessary. Then, the attenuation arrays of these PML domains are computed and stored for later use. The initial sound data from the speakers is added to the domains, and the preprocessing phase is complete. The solver is called with a pointer to the fully initialized scene.</p>
<h2>Running steps</h2>
<p>After initialization of the PSTDKernel, the simulation is start with a call to <a class="el" href="classOpenPSTD_1_1Kernel_1_1PSTDKernel.html#af83a92ba1b212b575140d8773d8df221">run</a>. This calls the <a class="el" href="classOpenPSTD_1_1Kernel_1_1Solver.html">Solver</a>. This class performs the spatial computations of the state variables using the PSTD method and the time integration using a six stage Runge Kutta scheme. Each time step the values of the scene are updated, and if requested they are returned to the calling application using the <a class="el" href="classOpenPSTD_1_1Kernel_1_1KernelCallback.html">callback</a> class. </p><h3>Detailed propagation</h3>
<p>For each time step, 3 individual steps take place:</p><ol type="1">
<li>Checking the need for an update.</li>
<li>Computing the state variables for the next Runge-Kutta substep</li>
<li>Adding these to the total pressure </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Mar 2 2016 23:11:55 for openPSTD by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
